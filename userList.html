<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>User List</title>
  <script src="./js/script.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.min.js"
    integrity="sha512-ykZ1QQr0Jy/4ZkvKuqWn4iF3lqPZyij9iRv6sGqLRdTPkY69YX6+7wvVGmsdBbiIfN/8OdsI7HABjvEok6ZopQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
    if (!isloggedin) {
      window.location.href = "./welcome.html";
    }
  </script>
  <link rel="stylesheet" href="./css/style.css">
</head>

<body>
  <nav class="navbar navbar-expand-lg bg-body-tertiary pd-0">
    <div class="container-fluid">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="./chatlist.html">Group Chat</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="./userList.html">Manage Users</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./documentList.html">Manage Documents</a>
          </li>
          <li class="nav-item">
            <a class="nav-link logoutButton" href="javascript:void(0)" onclick="return logout()">Logout</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="container-fluid">
    <h3 class="mt-3">Users</h3>
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">Email</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <script>
            let allUsers = JSON.parse(localStorage.getItem("users"));
            let htmlContent = "";
            let deleteContent = "";
            for (let i = 0; i < allUsers.length; i++) {
              if (loggedInId == allUsers[i].id) {
                deleteContent = `<a class="disabled">Delete</a>`;
              } else {
                deleteContent = `<a href="" onclick="return deleteUser(${allUsers[i].id})">Delete</a>`;
              }
              htmlContent +=
                `<tr class=''><td scope='row'>
                ${allUsers[i].fullname}
                </td><td>
                ${allUsers[i].email}
                </td><td><a href='./editUser.html?id=${allUsers[i].id}'>Edit</a>
                   | ${deleteContent}</td></tr>`;

            }
            document.write(htmlContent);
          </script>
        </tbody>
      </table>
    </div>
  </div>


</body>

</html>